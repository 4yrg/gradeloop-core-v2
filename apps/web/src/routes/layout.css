@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
	/* === SPACING & RADIUS === */
	--radius: 0.625rem;
	--radius-sm: 0.375rem;
	--radius-md: 0.5rem;
	--radius-lg: 0.625rem;
	--radius-xl: 1rem;

	/* === CORE BRAND COLORS === */
	--color-primary: #4f46e5; /* Deep Indigo - Primary actions, navigation */
	--color-primary-hover: #4338ca; /* Primary hover state */
	--color-primary-active: #3730a3; /* Primary active state */
	--color-primary-foreground: #ffffff;

	--color-secondary: #64748b; /* Cool Slate Blue - Secondary emphasis */
	--color-secondary-hover: #475569;
	--color-secondary-active: #334155;
	--color-secondary-foreground: #ffffff;

	--color-accent: #14b8a6; /* Soft Teal - Progress, highlights */
	--color-accent-hover: #0d9488;
	--color-accent-active: #0f766e;
	--color-accent-foreground: #ffffff;

	/* === AI-SPECIFIC COLORS === */
	--color-ai-highlight: #8b5cf6; /* Soft Violet Glow - AI suggestions */
	--color-ai-hover: #7c3aed;
	--color-ai-active: #6d28d9;
	--color-ai-bg-light: #f3f0ff; /* AI panel background (light) */
	--color-ai-border-light: #ddd6fe; /* AI panel border (light) */
	--color-ai-text-light: #6d28d9; /* AI accent text (light) */

	/* === SEMANTIC COLORS === */
	--color-success: #10b981; /* Emerald - Success states */
	--color-success-hover: #059669;
	--color-success-bg: #ecfdf5;
	--color-success-border: #a7f3d0;

	--color-warning: #f59e0b; /* Amber - Warning states */
	--color-warning-hover: #d97706;
	--color-warning-bg: #fffbeb;
	--color-warning-border: #fde68a;

	--color-error: #ef4444; /* Soft Red - Error states */
	--color-error-hover: #dc2626;
	--color-error-bg: #fef2f2;
	--color-error-border: #fecaca;

	--color-info: #0ea5e9; /* Sky Blue - Information */
	--color-info-hover: #0284c7;
	--color-info-bg: #f0f9ff;
	--color-info-border: #bae6fd;

	/* === NEUTRAL SCALE (LIGHT MODE) === */
	--color-neutral-0: #ffffff; /* Pure white surface */
	--color-neutral-50: #f8fafc; /* App background */
	--color-neutral-100: #f1f5f9; /* Sidebar background */
	--color-neutral-200: #e2e8f0; /* Borders */
	--color-neutral-300: #cbd5e1; /* Subtle borders */
	--color-neutral-400: #94a3b8; /* Disabled text */
	--color-neutral-500: #64748b; /* Muted text */
	--color-neutral-600: #475569; /* Secondary text */
	--color-neutral-700: #334155; /* Body text */
	--color-neutral-800: #1e293b; /* Primary text */
	--color-neutral-900: #0f172a; /* Headings */

	/* === SEMANTIC TOKENS (LIGHT MODE) === */
	--color-bg-default: var(--color-neutral-50);
	--color-bg-surface: var(--color-neutral-0);
	--color-bg-elevated: var(--color-neutral-0);
	--color-bg-muted: var(--color-neutral-100);

	--color-border-default: var(--color-neutral-200);
	--color-border-muted: var(--color-neutral-300);
	--color-border-subtle: var(--color-neutral-100);

	--color-text-primary: var(--color-neutral-800);
	--color-text-secondary: var(--color-neutral-600);
	--color-text-muted: var(--color-neutral-500);
	--color-text-disabled: var(--color-neutral-400);
	--color-text-inverse: var(--color-neutral-0);

	--color-action-primary: var(--color-primary);
	--color-action-primary-hover: var(--color-primary-hover);
	--color-action-secondary: var(--color-neutral-100);
	--color-action-secondary-hover: var(--color-neutral-200);

	/* === AI SEMANTIC TOKENS (LIGHT MODE) === */
	--color-ai-bg: var(--color-ai-bg-light);
	--color-ai-border: var(--color-ai-border-light);
	--color-ai-text: var(--color-ai-text-light);

	/* === CODE EDITOR (ALWAYS DARK) === */
	--color-code-bg: #0f172a;
	--color-code-surface: #1e293b;
	--color-code-text: #e2e8f0;
	--color-code-gutter: #334155;
	--color-code-selection: #312e81;
	--color-code-caret: #a5b4fc;

	/* === FOCUS RING === */
	--color-focus-ring: #818cf8; /* Universal focus ring color */
	--shadow-focus: 0 0 0 3px rgba(129, 140, 248, 0.35);

	/* === SHADOWS === */
	--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
	--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
	--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
	--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

	/* === LEGACY COMPATIBILITY === */
	--background: var(--color-bg-default);
	--foreground: var(--color-text-primary);
	--card: var(--color-bg-surface);
	--card-foreground: var(--color-text-primary);
	--popover: var(--color-bg-surface);
	--popover-foreground: var(--color-text-primary);
	--primary: var(--color-primary);
	--primary-foreground: var(--color-primary-foreground);
	--secondary: var(--color-secondary);
	--secondary-foreground: var(--color-secondary-foreground);
	--muted: var(--color-bg-muted);
	--muted-foreground: var(--color-text-muted);
	--accent: var(--color-accent);
	--accent-foreground: var(--color-accent-foreground);
	--destructive: var(--color-error);
	--border: var(--color-border-default);
	--input: var(--color-border-default);
	--ring: var(--color-focus-ring);
}

.dark {
	/* === NEUTRAL SCALE (DARK MODE) === */
	--color-neutral-950: #0b1120; /* App background (dark) */
	--color-neutral-900: #0f172a; /* Surface (dark) */
	--color-neutral-800: #1e293b; /* Elevated surface (dark) */
	--color-neutral-700: #334155; /* Border (dark) */
	--color-neutral-600: #475569; /* Subtle border (dark) */
	--color-neutral-500: #64748b; /* Disabled text (dark) */
	--color-neutral-400: #94a3b8; /* Muted text (dark) */
	--color-neutral-300: #cbd5e1; /* Secondary text (dark) */
	--color-neutral-200: #e2e8f0; /* Body text (dark) */
	--color-neutral-100: #f1f5f9; /* Primary text (dark) */
	--color-neutral-50: #f8fafc; /* Inverse text (dark) */

	/* === PRIMARY COLORS (DARK MODE ADJUSTMENTS) === */
	--color-primary: #6366f1; /* Slightly lighter for dark mode */
	--color-primary-hover: #4f46e5;
	--color-primary-active: #4338ca;

	/* === AI-SPECIFIC COLORS (DARK MODE) === */
	--color-ai-bg-dark: #1e1b4b; /* AI panel background (dark) */
	--color-ai-border-dark: #312e81; /* AI panel border (dark) */
	--color-ai-text-dark: #c4b5fd; /* AI accent text (dark) */

	/* === SEMANTIC TOKENS (DARK MODE) === */
	--color-bg-default: var(--color-neutral-950);
	--color-bg-surface: var(--color-neutral-900);
	--color-bg-elevated: var(--color-neutral-800);
	--color-bg-muted: var(--color-neutral-800);

	--color-border-default: var(--color-neutral-700);
	--color-border-muted: var(--color-neutral-600);
	--color-border-subtle: var(--color-neutral-800);

	--color-text-primary: var(--color-neutral-100);
	--color-text-secondary: var(--color-neutral-300);
	--color-text-muted: var(--color-neutral-400);
	--color-text-disabled: var(--color-neutral-500);
	--color-text-inverse: var(--color-neutral-900);

	--color-action-secondary: var(--color-neutral-800);
	--color-action-secondary-hover: var(--color-neutral-700);

	/* === AI SEMANTIC TOKENS (DARK MODE) === */
	--color-ai-bg: var(--color-ai-bg-dark);
	--color-ai-border: var(--color-ai-border-dark);
	--color-ai-text: var(--color-ai-text-dark);

	/* === SEMANTIC COLOR ADJUSTMENTS (DARK MODE) === */
	--color-success-bg: #064e3b;
	--color-success-border: #047857;
	--color-warning-bg: #451a03;
	--color-warning-border: #92400e;
	--color-error-bg: #450a0a;
	--color-error-border: #b91c1c;
	--color-info-bg: #0c4a6e;
	--color-info-border: #0369a1;

	/* === CODE EDITOR SLIGHT ELEVATION (DARK MODE) === */
	--color-code-surface: #111827; /* Slightly elevated from main surface */

	/* === LEGACY COMPATIBILITY (DARK MODE) === */
	--background: var(--color-bg-default);
	--foreground: var(--color-text-primary);
	--card: var(--color-bg-surface);
	--card-foreground: var(--color-text-primary);
	--popover: var(--color-bg-surface);
	--popover-foreground: var(--color-text-primary);
	--primary: var(--color-primary);
	--primary-foreground: var(--color-primary-foreground);
	--secondary: var(--color-secondary);
	--secondary-foreground: var(--color-secondary-foreground);
	--muted: var(--color-bg-muted);
	--muted-foreground: var(--color-text-muted);
	--accent: var(--color-accent);
	--accent-foreground: var(--color-accent-foreground);
	--destructive: var(--color-error);
	--border: var(--color-border-default);
	--input: var(--color-border-default);
	--ring: var(--color-focus-ring);
}

@theme inline {
	/* === RADIUS === */
	--radius-sm: var(--radius-sm);
	--radius-md: var(--radius-md);
	--radius-lg: var(--radius-lg);
	--radius-xl: var(--radius-xl);

	/* === COLORS === */
	--color-background: var(--color-bg-default);
	--color-foreground: var(--color-text-primary);
	--color-card: var(--color-bg-surface);
	--color-card-foreground: var(--color-text-primary);
	--color-popover: var(--color-bg-surface);
	--color-popover-foreground: var(--color-text-primary);
	--color-primary: var(--color-primary);
	--color-primary-foreground: var(--color-primary-foreground);
	--color-secondary: var(--color-action-secondary);
	--color-secondary-foreground: var(--color-text-primary);
	--color-muted: var(--color-bg-muted);
	--color-muted-foreground: var(--color-text-muted);
	--color-accent: var(--color-accent);
	--color-accent-foreground: var(--color-accent-foreground);
	--color-destructive: var(--color-error);
	--color-border: var(--color-border-default);
	--color-input: var(--color-border-default);
	--color-ring: var(--color-focus-ring);

	/* === AI-SPECIFIC === */
	--color-ai-highlight: var(--color-ai-highlight);
	--color-ai-bg: var(--color-ai-bg);
	--color-ai-border: var(--color-ai-border);
	--color-ai-text: var(--color-ai-text);

	/* === SEMANTIC COLORS === */
	--color-success: var(--color-success);
	--color-success-bg: var(--color-success-bg);
	--color-success-border: var(--color-success-border);
	--color-warning: var(--color-warning);
	--color-warning-bg: var(--color-warning-bg);
	--color-warning-border: var(--color-warning-border);
	--color-error: var(--color-error);
	--color-error-bg: var(--color-error-bg);
	--color-error-border: var(--color-error-border);
	--color-info: var(--color-info);
	--color-info-bg: var(--color-info-bg);
	--color-info-border: var(--color-info-border);

	/* === CODE COLORS === */
	--color-code-bg: var(--color-code-bg);
	--color-code-surface: var(--color-code-surface);
	--color-code-text: var(--color-code-text);
	--color-code-gutter: var(--color-code-gutter);
	--color-code-selection: var(--color-code-selection);
	--color-code-caret: var(--color-code-caret);

	/* === SHADOWS === */
	--shadow-sm: var(--shadow-sm);
	--shadow-md: var(--shadow-md);
	--shadow-lg: var(--shadow-lg);
	--shadow-xl: var(--shadow-xl);
	--shadow-focus: var(--shadow-focus);

	/* === NEUTRAL SCALE === */
	--color-neutral-0: var(--color-neutral-0);
	--color-neutral-50: var(--color-neutral-50);
	--color-neutral-100: var(--color-neutral-100);
	--color-neutral-200: var(--color-neutral-200);
	--color-neutral-300: var(--color-neutral-300);
	--color-neutral-400: var(--color-neutral-400);
	--color-neutral-500: var(--color-neutral-500);
	--color-neutral-600: var(--color-neutral-600);
	--color-neutral-700: var(--color-neutral-700);
	--color-neutral-800: var(--color-neutral-800);
	--color-neutral-900: var(--color-neutral-900);
	--color-neutral-950: var(--color-neutral-950);
}

@layer base {
	* {
		@apply border-border;
	}

	*:focus-visible {
		outline: none;
		box-shadow: var(--shadow-focus);
	}

	body {
		@apply bg-background text-foreground antialiased;
		font-feature-settings:
			'rlig' 1,
			'calt' 1;
	}

	/* === REDUCED MOTION SUPPORT === */
	@media (prefers-reduced-motion: reduce) {
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}

	/* === HIGH CONTRAST SUPPORT === */
	@media (prefers-contrast: high) {
		:root {
			--color-border-default: #000000;
			--color-text-primary: #000000;
		}

		.dark {
			--color-border-default: #ffffff;
			--color-text-primary: #ffffff;
		}
	}

	/* === SCROLLBAR STYLING === */
	::-webkit-scrollbar {
		width: 8px;
		height: 8px;
	}

	::-webkit-scrollbar-track {
		background: var(--color-bg-muted);
	}

	::-webkit-scrollbar-thumb {
		background: var(--color-border-default);
		border-radius: var(--radius-sm);
	}

	::-webkit-scrollbar-thumb:hover {
		background: var(--color-text-muted);
	}

	/* === SELECTION STYLING === */
	::selection {
		background-color: rgba(79, 70, 229, 0.2);
		color: var(--color-text-primary);
	}

	.dark ::selection {
		background-color: rgba(99, 102, 241, 0.3);
	}
}

/* === UTILITY CLASSES === */
@layer utilities {
	.focus-ring {
		box-shadow: var(--shadow-focus);
	}

	.ai-glow {
		box-shadow: 0 0 20px rgba(139, 92, 246, 0.15);
	}

	.code-bg {
		background-color: var(--color-code-bg);
		color: var(--color-code-text);
	}

	.surface-elevated {
		background-color: var(--color-bg-elevated);
		border: 1px solid var(--color-border-subtle);
		box-shadow: var(--shadow-sm);
	}

	.ai-panel {
		background-color: var(--color-ai-bg);
		border-left: 4px solid var(--color-ai-highlight);
		border-radius: var(--radius-md);
	}

	.semantic-success {
		background-color: var(--color-success-bg);
		border-color: var(--color-success-border);
		color: var(--color-success);
	}

	.semantic-warning {
		background-color: var(--color-warning-bg);
		border-color: var(--color-warning-border);
		color: var(--color-warning);
	}

	.semantic-error {
		background-color: var(--color-error-bg);
		border-color: var(--color-error-border);
		color: var(--color-error);
	}

	.semantic-info {
		background-color: var(--color-info-bg);
		border-color: var(--color-info-border);
		color: var(--color-info);
	}
}
